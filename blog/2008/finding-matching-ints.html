<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CoffeaElectronica.com</title>

    <meta name="description" content="A technical blog.">
    <meta name="author" content="Christopher J. Stehno">
    <meta name="keywords" content="java,groovy,blog">
    <meta name="generator" content="JBake">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/asciidoctor.css" rel="stylesheet">
    <link href="/css/base.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/favicon.ico">
</head>

<body onload="prettyPrint()">

<div class="container-fluid">

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <img src="/images/coffee-banner.jpg" class="img-responsive" />
        </div>
    </div>

    <nav class="navbar navbar-inverse" style="margin-bottom: 2px;">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/index.html">&nbsp;CoffeaElectronica</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="/archive.html" title="Archives"><span class="glyphicon glyphicon-calendar"></span></a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" title="Tags"><span class="glyphicon glyphicon-tags"></span> <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            
                                    <li><a href="/tags/ant.html">ant</a></li>
                            
                                    <li><a href="/tags/blog.html">blog</a></li>
                            
                                    <li><a href="/tags/gradle.html">gradle</a></li>
                            
                                    <li><a href="/tags/groovy.html">groovy</a></li>
                            
                                    <li><a href="/tags/java.html">java</a></li>
                            
                                    <li><a href="/tags/javascript.html">javascript</a></li>
                            
                                    <li><a href="/tags/maven.html">maven</a></li>
                            
                                    <li><a href="/tags/python.html">python</a></li>
                            
                                    <li><a href="/tags/spring.html">spring</a></li>
                            
                                    <li><a href="/tags/testing.html">testing</a></li>
                            
                                    <li><a href="/tags/vanilla.html">vanilla</a></li>
                            
                        </ul>
                    </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://stehno.com" title="Web Site" target="_blank"><span class="glyphicon glyphicon-user"></span></a></li>
                    <li><a href="http://github.com/cjstehno" title="Projects" target="_blank"><span class="glyphicon glyphicon-wrench"></span></a></li>
                    <li><a href="/feed.xml" title="Feed"><span class="glyphicon glyphicon-bullhorn"></span></a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

	
	<h1>Spring Deserialized Object Factory</h1>

	<p><em><span class="glyphicon glyphicon-calendar"></span> 02 February 2008</em> ~ <a href='/tags/blog.html'><span class='label label-success'><span class='glyphicon glyphicon-tag'></span> blog</span></a>, <a href='/tags/java.html'><span class='label label-success'><span class='glyphicon glyphicon-tag'></span> java</span></a>, <a href='/tags/spring.html'><span class='label label-success'><span class='glyphicon glyphicon-tag'></span> spring</span></a></p>

	<p><p>Okay, here is a little question I have taken to asking in the interviews we have been giving lately.</p><p>The questions is as follows:</p>
<blockquote><p>Assume that you have an array of <code>int</code>s with exactly two of them being equivalent. Write a method to return the <code>int</code> that is duplicated.</p>
</blockquote><p>Since most candidates have been failing this one for the most part, I have started compiling a catalog of all the possible and sensible<br/>solutions to the problem. It's kind of a fun little project. Below are some of the implementations I have come up with. When I came<br/>across this question, it did not have an answer provided. My first shot at it was the following, but without the array sorting. Oops,<br/>without the sorting it works as long as they are next to each other, hence the need for sorting:</p>
<pre><code class="java">public int findMatching(final int[] array){
    Arrays.sort(array);
    for(int i=0; i&lt;array.length-1; i++){
        if(array[i] == array[i+1]) return array[i];
    }
    throw new IllegalArgumentException(&quot;Array contains no matches!&quot;);
}
</code></pre><p>The second implementation was something I had as a first thought but could not remember the exact functionality of the <code>Set</code> <code>add(Object)</code><br/>method, which is kind of important in this case.</p>
<pre><code class="java">public int findMatching(final int[] array){
    final Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;(array.length);
    for(int i : array){
        if(!set.add(i)) return i;
    }
    throw new IllegalArgumentException(&quot;Array contains no matches!&quot;);
}
</code></pre><p>The third implementation is the one most of our candidates seem to jump for, brute force, comparing every element with every other element<br/>(we still give credit for it though):</p>
<pre><code class="java">public int findMatching(final int[] array){
    for(int i=0; i&lt;array.length; i++){
        for(int j=0; j&lt;array.length; j++){
            if(i != j &amp;&amp; array[i] == array[j]) return array[i];
        }
    }
    throw new IllegalArgumentException(&quot;Array contains no matches!&quot;);
}
</code></pre><p>You will notice that I used an <code>IllegalArgumentException</code> to denote the lack of matches. You can't really return a -1 or something like<br/>that since your <code>int</code>s could be of any value.</p><p>I am sure that there are one or two more interesting solutions for this problem, but thought I would share what I have found. These are always fun<br/>little code problems to play with. Yes, we are still using this in our interview process, but I am not afraid that a potential candidate will<br/>find this since they generally don't know my name, and likewise I don't advertise what company I work for. Actually, I would probably give a<br/>"golf clap" to the candidate that walks into our interview with a print out of this entry.</p><h2>Recursive Solution to Finding Ints Question</h2>
<blockquote><p>Originally a separate posting on 5/28/2008</p>
</blockquote><p>Earlier I showed a few different solutions to the problem. A candidate we had recently suggested solving it via recursion; I decided to whip up a<br/>little recursive solution for my collection:</p>
<pre><code class="java">public static int find(int[] array){
    return scan(new HashSet&lt;Integer&gt;(),array,0);
}

private static int scan(Set&lt;Integer&gt; values, int[] array, int idx){
    if(idx == array.length){
        throw new IllegalArgumentException(&quot;No match exists&quot;);
    } else if(!values.add(array[idx])){
        return array[idx];
    }
    return scan(values,array,++idx);
}
</code></pre><p>Note that this solution requires an additional method to perform the recursion but there are no loops. An alternate<br/>version removes the <code>Set</code> and uses pre-sorting of the array.</p>
<pre><code class="java">public static int find(int[] array){
    Arrays.sort(array);
    return scan(array,0);
}

public static int scan(int[] array, int idx){
    if(idx == array.length){
        throw new IllegalArgumentException(&quot;No match exists&quot;);
    } else if(array[idx] == array[idx+1]){
        return array[idx];
    }
    return scan(array,++idx);
}
</code></pre><p>This problem has really become an interesting study; as I use it as one of our tests for interview candidates I<br/>really find it an interesting ruler to compare how various developers think.</p><p>Two interesting common threads are that most developers find the brute-force approach (double for loop) which is good but very telling, the other is that<br/>when faced with the idea that it is possible an array may be passed in without a match, they struggle on what to do at<br/>that point. The first solution people look at is some signal like a -1 or <code>null</code>, neither of which works. After<br/>hinting they will come across the idea of the exception but usually want to create their own unique exception for this<br/>method.</p><p>I think it would also be an interesting exercise to implement this problem in other languages such as Groovy, Ruby or Scala.</p><h2>Finding Matching Ints Using Regex</h2>
<blockquote><p>Originally a separate post on 6/42008</p>
</blockquote><p>If you are following along you may have noticed that I have been compiling a long list of solutions to this problem; I was talking<br/>to one of my co-workers, who is not a developer but used to do some Perl hacking, and he suggested that it could be done with<br/>regular expressions.</p><p>Lo and behold, with the help of another of my more regular-expression-ized co-workers we found this to be true:</p>
<pre><code class="java">public int findDuplicate(final int[] array){
    final Pattern p = Pattern.compile(&quot;.*?(\\d+. ).*?\\1.*&quot;);
    final Matcher m = p.matcher(join(array));
    if(m.find()){
        return Integer.valueOf(m.group(1).trim());
    }

    throw new IllegalArgumentException(&quot;No match found!&quot;);
}

private String join(final int[] array){
    final StringBuilder str = new StringBuilder();
    for(final int i : array){
        str.append(i).append(&quot; &quot;);
    }
    return str.toString();
}
</code></pre><p>Granted, it's not quite as straight-forward as the other solutions, but it is a very novel approach to solving the<br/>problem... leave it to a Perl guy. :-) I wonder what the runtime of this would be?</p><h2>Finding Duplicate Ints: PHP</h2>
<blockquote><p>Originally a separate post on 8/13/2008</p>
</blockquote><p>I have have come across another solution from a php developer that I recently interviewed... in php.</p>
<pre><code class="php">function findInts($array){
    $out = Array();
    foreach($array as $num){
        if(array_exist($out,$num){
            return $num;
        }
        array_push($num);
    }
}
</code></pre><p>He also mentioned the pre-sorting approach as well in order to speed things up. I still need to fully validate the<br/>php functions that he mentions, but it seems correct. I also didn't go into the error-case much with him, not really being a php expert myself.</p><h2>Find Matching Ints with JavaScript</h2>
<blockquote><p>Originally separate post on 10/30/2009</p>
</blockquote><p>I realized that I had yet to come up with a JavaScript solution so I decide a quick implementation would be fun.</p>
<pre><code class="html">&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            function findDup(items){
                items.sort();
                for( var i=0; i&lt;items.length-1; i++){
                    if( items[i] == items[i+1] ) return items[i];
                }
                throw &quot;No duplicate values!&quot;;
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body onload=&quot;alert( findDup( new Array( 6, 9, 2, 5, 1, 6) ) )&quot;&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>There is not much to it, and nothing really exciting. I also worked up quick versions using <a href="http://prototypejs.org">Prototype</a> and <a href="http://jquery.com">JQuery</a>; however, neither one really provided any useful deviation from the standard JavaScript approach.</p><h2>Finding Duplicate Ints: Clojure</h2>
<blockquote><p>Originally separate post on 10/23/2009</p>
</blockquote><p>Here's a solution based on <a href="http://clojure.org/">Clojure</a>. I worked on the solution to this problem in a few steps, which I will share. First, I assumed that the list of numbers has been sorted:</p>
<pre><code class="clojure">(defn find-dupint [intseq]
    (loop [result nil its intseq]
        (if (= result (peek its))
            result
            (recur (peek its) (pop its))
        )
    )
)
</code></pre><p>This function simmply iterates over the list of numbers and returns the first number whose value matches the next<br/>number in the sequence. This code will fail if the numers are not in order and the problem definition says that they can<br/>be in any order, so I worked up the following code to sort the numbers before looping through them:</p>
<pre><code class="clojure">(defn find-dupint [intseq]
    (let [sorint (sort intseq)]
        (loop [result nil its sorint]
            (if (= result (first its))
                result
                (recur (first its) (rest its))
            )
        )
    )
)
</code></pre><p>Notice that I changed <code>(peek coll)</code> and <code>(pop coll)</code> to <code>(first coll)</code> and <code>(rest coll)</code>, which work on sequences rather<br/>than stacks. I kept getting a <code>ClassCastException</code> the other way. Now all that's left is to have an exception thrown<br/>when no duplicated number is found. The function as written returns a <code>nil</code>, which is ok for Clojure I guess but not<br/>really the same behavior as the other versions of this code as it is defined, so I dipped into the Java<br/>interoperability features to add some exception throwing for the finished product:</p>
<pre><code class="clojure">(defn find-dupint [intseq]
    (let [sorint (sort intseq)]
        (loop [result nil its sorint]
            (if (= result (first its))
                (if (nil? result)
                    (throw (new IllegalArgumentException &quot;No duplicate found!&quot;))
                        result
                    )
                (recur (first its) (rest its))
            )
        )
    )
)
</code></pre><p>Note: the <code>IllegalArgumentException</code> does not need to be fully qualified because the <code>java.lang</code> package is imported by<br/>default, just as it is in Java. The output from using this function is shown below:</p>
<pre><code>1:1 user=&gt; (find-dupint [1 2 3])
java.lang.IllegalArgumentException: No duplicate found! (repl-1:1)

1:2 user=&gt; (find-dupint [1 2 3 2])
2
</code></pre><p>An intesting side-effect of this version is that you are not constrained to use ints, or even numbers for that<br/>matter. You could actually use any <code>Comparable</code> object. (It would not be that difficult to add the ability to<br/>really generalize the function by passing in a comparator) A few other comparable objects are tested below:</p>
<pre><code>1:1 user=&gt; (find-dupint [&quot;a&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;])
&quot;a&quot;

1:2 user=&gt; (find-dupint [1.1 1.4 1.3 1.22 1.1])
1.1
</code></pre><p>I guess I should rename the function "find-dup" to reflect the broader scope than just integers. At this point,<br/>reviewing the code, it's not all that less verbose than the Java version, but it gets the job done. I will have to come<br/>back to this problem again as I get more experience with Clojure... I am willing to bet there is a more concise way to<br/>achieve the same results.</p><h2>Finding Duplicate Ints: Python</h2>
<blockquote><p>Originally separate posting on 11/19/2009</p>
</blockquote><p>Here's a version with Python. It's actually a very interesting language and I am surprised that I have not really looked into it sooner. It has a rich set of built-in libraries and tons of extension modules. The code I came up with is pretty straight-forward:</p>
<pre><code class="python">def find_dup_int(items):
    items.sort()
    for i in range(len(items)-1):
        if items[i] == items[i+1]:
            return items[i]
    raise RuntimeError(&#39;No duplicate values found!&#39;)
</code></pre><p>I need to find a handful of other more interesting problems to try when playing with other languages, since this one seems to look basically the same in each language I have tried. I will have to spend a little more time with Python, it feels very useful, and as you can see, not very verbose (though not to a fault).</p><h2>Finding Duplicate Ints: Ruby and Groovy</h2>
<blockquote><p>Originally separate posting on 2/22010</p>
</blockquote><h3>Groovy Version</h3>
<pre><code class="groovy">def findDups( n ){
    n.sort()
    for( i in (1..n.size())){
        if(n[i] == n[i-1]) return n[i]
    }
}
</code></pre><p>In this case, I am allowing null to be the value returned when no duplicate is found. It does seem to be a more<br/>realistic value for Groovy. It's a pretty straight forward function, along the same lines as the other languages. I<br/>thought maybe I could find some really cool feature of Groovy that would make this radically different from the Java<br/>version... nope. It does collapse nicely down to a single line though:</p>
<pre><code class="groovy">def findDups( n ){ n.sort(); for( i in (1..n.size()) ) if(n[i] == n[i-1]) return n[i] }
</code></pre><h3>Ruby Version</h3>
<pre><code class="ruby">def findDups( n )
    n.sort!()
    for i in (1..n.size())
        if(n[i] == n[i-1]) then return n[i] end
    end
    return nil
end
</code></pre><p>Nothing exciting in either case, but worth doing for completeness.</p></p>


            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <hr>
                    <div style="text-align:center;">
                        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a> CoffeaElectronica.com content is copyright &copy; 2016 <a href="http://stehno.com">Christopher J. Stehno</a> and available under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
                    </div>
                </div>
            </div>

        </div>

        <script src="/js/jquery-1.12.4.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/prettify.js"></script>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-27165855-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>