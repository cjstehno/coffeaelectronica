
<html><head>
<title>Floating and Following Div</title>
<meta name="grackle.layout" content="post" />
<meta name="grackle.date-published" content="2008-10-28T11:43:00.000-05:00" />
</head><body>I needed one of those <tt>DIV</tt>s that appears on call and then stays in view even when you scroll, until you close it. For lack of a better name, I call it the floating following div, and it's pretty easy to make. With a little help from <a href="http://prototypejs.org/">Prototype</a> we can even make it work across the major browsers. <br /><a name='more'></a>First you need to put the div to be floated somewhere on your page. The page itself can be anything you want.  <br /><br /><pre class="brush:html">&lt;div id="movable"&gt;This is my floating area&lt;/div&gt;</pre><br />and then you need to give it some initial style:  <br /><br /><pre class="brush:css">#movable {<br />    position: absolute;<br />    left: 100px;<br />    width: 200px;<br />    height: 200px;<br />    background-color: red;<br />}</pre><br />Once all that is on the page, you will need some JavaScript to do the fancy stuff:  <br /><br /><pre class="brush:html">&lt;script type="text/javascript" src="prototype.js"&gt;&lt;/script&gt;<br />&lt;script type="text/javascript"&gt;          <br />    Event.observe(window,'load',function(evt){<br />        $('movable').hide();<br />            <br />        Event.observe('showme','click',showDiv);<br />              <br />        Event.observe(window,'scroll', function(evt){<br />            $('movable').setStyle({ top: 8 + document.viewport.getScrollOffsets().top + 'px' });<br />        });<br />    });<br />            <br />    function showDiv(evt){<br />        $('movable').show();<br />    }<br />&lt;/script&gt;<br /></pre><br />This causes the "movable" element to be hidden. Once the button with an id of "showme" is clicked, the element will be shown and will then follow along with vertical scrolling, staying up near the top of the view port. The key to this following motion is the function mapped to the <tt>window</tt> scrolling event:  <br /><br /><pre class="brush:javascript">$('movable').setStyle({ top: 8 + document.viewport.getScrollOffsets().top + 'px' });</pre><br />The <a href="http://prototypejs.org/api/document/viewport/getscrolloffsets">document.viewport.getScrollOffsets()</a> function is provided by Prototype.  It's nothing exciting, but it works... just another thing posted here for future reference. </body></html>
