
<html><head>
<title>Scaling Images With Groovy</title>
<meta name="grackle.layout" content="post" />
<meta name="grackle.date-published" content="2008-03-03T18:15:00.000-06:00" />
</head><body>I had the need to scale some large JPG images from my camera so I whipped up a quick little <a href="http://groovy.codehaus.org/">Groovy</a> script to do the trick.<br /><a name='more'></a> Thought I would share.  <br /><br /><pre class="brush:groovy">// groovy ScaleImages.groovy DIRNAME SCALE%<br />    <br />import javax.imageio.ImageIO<br />import java.io.File<br />import java.awt.Image<br />import java.awt.Color<br />import java.awt.image.BufferedImage<br />    <br />class ScaleImages {<br />    <br />    static void main(String[] args){<br />        def directory = new File(args[0])<br />        if(!directory.isDirectory()){<br />            System.out.println("You must specify a valid directory!")<br />            System.exit(0)<br />        }<br />    <br />        def scale = Integer.valueOf(args[1])<br />    <br />        directory.eachFile {<br />            def image = ImageIO.read(it)<br />            int w = image.getWidth() * scale / 100<br />            int h = image.getHeight() * scale / 100<br />    <br />            def scaled = image.getScaledInstance(w,h,Image.SCALE_SMOOTH)<br />   <br />            def newImage = new BufferedImage(w,h,image.getType())<br />            def graphics = newImage.createGraphics()<br />            graphics.drawImage(scaled,0,0,w,h,Color.white,null)<br />   <br />            if(ImageIO.write(newImage,"jpg",new File(it.getParent(),"scaled_" + it.getName()))){<br />                System.out.println("scaled: " + it);<br />            } else {<br />                System.out.println("failed: " + it);<br />            }<br />        }<br />    }<br />}</pre><br />It's pretty simple. You load the image file to create a <tt>BufferedImage</tt>. You then create a scaled <tt>Image</tt> and draw it onto the new empty <tt>BufferedImage</tt> and save it off. I would recommend some performance enhancements if you are doing huge batches of images but for a directory containing a handful of images it works great and pretty fast. Also, note that this does not handle sub-directories of images, only the directory that you give it.</body></html>
