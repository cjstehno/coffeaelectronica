<html>
<head>
    <title>Java Regex Search and Replace</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2008-08-12T11:34:00.000-05:00"/>
</head>
<body>For many years, I felt that there was nothing "regular" about Regular Expressions, but lately I have been warming
up to them a bit. The <a href="http://www.bastian-bergerhoff.com/eclipse/features/web/QuickREx/toc.html">QuickRex</a>
Eclipse plug-in has really helped make them easier to manage, but that's not what this post is about.<br/><a
        name='more'></a> I recently needed to do a regex-based search and replace operation to convert all the html
entities in a string to their actual character equivalents, basically unescape all the entities in an html string (don't
ask why). With a little regex and a little searching documentation browsing I found that it is very easy to do. Start
out with the pattern, which should be a static class member (it is thread-safe once created): <br/><br/>
<pre class="brush:java">private static final Pattern entityPattern = Pattern.compile("(&amp;[a-z]*;)");</pre>
<br/>The pattern will match any html entity, which have the form <tt>&amp;name;</tt>. Next we need the search and
replace code: <br/><br/>
<pre class="brush:java">private String unescapeEntities(final String html){<br/>    final StringBuffer buffer = new StringBuffer();<br/>    final Matcher matcher = entityPattern.matcher(html);<br/>    while (matcher.find()) {<br/>        matcher.appendReplacement(<br/>            buffer, <br/>            StringEscapeUtils.unescapeHtml(matcher.group())<br/>        );<br/>    }<br/>    matcher.appendTail(buffer);<br/><br/>    return buffer.toString();<br/>}<br/></pre>
<br/>Your <tt>StringBuffer</tt> will end up with the replaced content of your string. The <tt>StringEscapeUtils</tt>
class is from the <a href="http://commons.apache.org/lang">Jakarta Commons - Lang</a> API. Sorry, this isn't much of a
tutorial... it's more of a code snippet for future use.
</body>
</html>
