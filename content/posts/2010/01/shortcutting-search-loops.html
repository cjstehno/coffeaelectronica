<html>
<head>
    <title>Shortcutting Search Loops</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2010-01-11T10:39:00.000-06:00"/>
</head>
<body>A simple mistake I have seen a lot is not breaking out of a search loop once you have found what you are searching
for. Take the code below, for example: <br/><br/>
<pre class="brush:java">public User findUser(String name){<br/>    User foundUser = null;<br/>    <br/>    for( User user : product.getUsers() ){<br/>        if( name.equals(user.getName()) ){<br/>            foundUser = user;<br/>        }<br/>    }<br/>    <br/>    return foundUser;<br/>}<br/></pre>
<br/>This code will loop through <i>every</i> user even after you have found the user you are looking for, which for
large sets of data can get very inefficient. You can shortcut the loop with a break statement: <br/><br/>
<pre class="brush:java">public User findUser(String name){<br/>    User foundUser = null;<br/>    <br/>    for( User user : product.getUsers() ){<br/>        if( name.equals(user.getName()) ){<br/>            foundUser = user;<br/>            break;<br/>        }<br/>    }<br/>    <br/>    return foundUser;<br/>}<br/></pre>
<br/>which will drop the control out of the loop once your user has been found. You could also simply return the user
when found, such as <br/><br/>
<pre class="brush:java">public User findUser(String name){<br/>    for( User user : product.getUsers() ){<br/>        if( name.equals(user.getName()) ){<br/>            return user;<br/>        }<br/>    }<br/>    return null;<br/>}<br/></pre>
<br/>This version causes there to be two exit points in the method, which is often frowned upon. Personally, I don't see
a problem with this in short simple methods. Lastly, if you are a couple levels deep in a loop and cannot simply use a
"return" for some reason, you can use a label to break out of the loop. Consider this example of a Map of Lists
(something that you generally should not do): <br/><br/>
<pre class="brush:java">User foundUser = null;<br/>Iterator&lt;List&lt;User&gt;&gt; lists = users.values();<br/>finder: for( List&lt;User&gt; list : users.values() ){<br/>    for( User user : list){<br/>        if( name.equals(user.getName()){<br/>            foundUser = user;<br/>            break finder;<br/>        }<br/>    }<br/>}<br/></pre>
<br/>which will break out of the loop labeled "finder" (the outer loop). There are, of course, other ways of breaking
out of loops, but these are the most general and cleanest, in my opinion.
</body>
</html>
