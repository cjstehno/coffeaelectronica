<html>
<head>
    <title>Converting Numbers to Ranges: Clojure</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2010-10-10T20:31:00.000-05:00"/>
</head>
<body>Ok, in a wild mood, I decided to go back and try some <a href="http://clojure.org/">Clojure</a> again to work out
another implementation of the number range problem. I think Clojure needed some time to sink into my brain, as it seemed
to make more sense this time around. <br/><a name='more'></a>Working out the solution for this was not all that bad:
<br/><br/>
<pre class="brush:text">(defn rangify [items]<br/>  (loop [its items holder nil outp ""]<br/>    (if (empty? its)<br/>      outp<br/>      (if (= (+ (first its) 1) (first (rest its)) )<br/>        (if (nil? holder)<br/>          (recur (rest its) (first its) outp )<br/>          (recur (rest its) holder outp )<br/>        )<br/>        (if (nil? holder)<br/>          (recur (rest its) nil (print-str outp (first its) "," ) )<br/>          (recur (rest its) nil (print-str outp holder "-" (first its) "," ) )<br/>        )<br/>      )<br/>    )<br/>  )<br/>)<br/></pre>
<br/>I am sure that there is still a lot that can be done to make this cleaner and more efficient. Even now it does not
fully satisfy the criteria since the output is not quite right, as shown below: <br/><br/>
<pre class="brush:text">ranges=&gt; (rangify [1 2 3 4 5 6 10])<br/>" 1 - 6 , 10 ,"<br/></pre>
<br/>After a little more thought, I was able to move some of the function calls around and merge them into the recur
calls to simplify and tighten the code down a bit so that we end up with: <br/><br/>
<pre class="brush:text">(defn rangify [items]<br/>  (loop [its items holder nil outp ""]<br/>    (if (empty? its)<br/>      outp<br/>      (if (= (inc (first its)) (first (rest its)) )<br/>        (recur (rest its) (if holder holder (first its) ) outp )<br/>        (recur (rest its) nil<br/>          (if holder<br/>            (print-str outp holder "-" (first its) "," )<br/>            (print-str outp (first its) "," )<br/>          )<br/>        )<br/>      )<br/>    )<br/>  )<br/>)<br/></pre>
<br/>This, actually is a bit cleaner and easier to read, but it sure seems like an odd language. I decided to put out
what I have and come back to finish it later. It was a fun exercise.
</body>
</html>
