
<html><head>
<title>Obsessed With Ranges</title>
<meta name="grackle.layout" content="post" />
<meta name="grackle.date-published" content="2010-10-16T20:36:00.000-05:00" />
</head><body>Okay, I had drafts for three more postings of different solutions to the Home on the Range problem mentioned in earlier postings. I decided that I need to merge them into one post to save you all from being overly spammed by odd little programming snippets. <br /><a name='more'></a>First off, we have an alternate Groovy solution based on the recursive approach which was necessary for the Clojure implementation:  <br /><br /><pre class="brush:groovy">def iter( items, holder, str ){<br />    if( items.isEmpty() ) return "${str[0..(str.length()-3)]}."<br /> <br /> def it = items.remove(0) as int<br /> if( it+1 == (items[0] as int) ){<br />  iter( items, holder ?: it, str )<br /> } else {<br />  iter( items, null, holder ? "$str$holder-$it, " : "$str$it, " )<br /> }<br />}<br /><br />def rangize( items ){<br />    iter( items, null, '' )<br />}<br /></pre><br />I had fun with this one as I got to play with some Groovy syntax sugar; however, I was unable to do it in a single function definition, so you get two.  Next, we have a solution done using Ruby, which I was surprised to see that I had not previously done.  <br /><br /><pre class="brush:ruby">def rangize( items )<br /> holder, str = nil, ''<br /> for i in (0...items.size())<br />  if items[i].to_i + 1 == items[i+1].to_i then<br />   if !holder then holder = items[i] end<br />  else<br />   str &lt;&lt; (holder ? "#{holder}-" : '') &lt;&lt; "#{items[i]}, "<br />   holder = nil<br />  end<br /> end<br /> str.chomp(', ') &lt;&lt; '.'<br />end<br /></pre><br />Well, after working on it I realized why I didn't bother before... other than a few Ruby syntax items, it's not all that interesting.  The final one is the kicker. I got a little crazy and decide to do an implementation of the recursive approach using browser-based JavaScript:  <br /><br /><pre class="brush:javascript">function rangize(nums){<br /> function iter(items, holder, str){<br />  if(items.length == 0) return str;<br />  <br />  var itm = items[0];<br />  if( (parseInt(itm)+1) == parseInt(items[1]) ){<br />   return iter( items.slice(1), holder ? holder : itm, str);<br />  } else {<br />   return iter( items.slice(1), null, str + (holder ? holder+ '-' + itm : itm) + ', ' );<br />  }<br /> }<br /> var str = iter(nums,null,'');<br /> return str.slice(0, str.length-2) + '.';<br />}<br /></pre><br />Yes, you can nest functions inside of functions in JavaScript... I never realized that. The implementaion is not quite as clean as some of the others since JavaScript lacks some of the fancy string manipulation syntax; however, it really helps to show that JavaScript is a fairly robust and powerful language in itself.  For better or worse, you could add some additional helper functions (also nested) to clean up the iteration a bit, though it does make it a bit more "busy" when you first look at it:  <br /><br /><pre class="brush:javascript">function rangize(nums){<br /> function eqNxt( items ){ return (parseInt(items[0])+1) == parseInt(items[1]); }<br /> <br /> function endcap( str ){ return str.slice(0, str.length-2) + '.'; }   <br /> <br /> function iter(items, holder, str){<br />  if(items.length == 0) return str;<br />  <br />  return iter( <br />   items.slice(1), <br />   eqNxt(items) ? (holder ? holder : items[0]) : null, <br />   eqNxt(items) ? str : (str + (holder ? holder+ '-' + items[0] : items[0]) + ', ')<br />  );<br /> }<br /> return endcap( iter(nums,null,'') );<br />}<br /></pre><br />Here is the whole code for the HTML test page:  <br /><br /><pre class="brush:html">&lt;html&gt;<br /> &lt;head&gt;<br />  &lt;title&gt;Home on The Range&lt;/title&gt;<br />  &lt;script type="text/javascript"&gt;<br />   function rangize(nums){<br />    function iter(items, holder, str){<br />     if(items.length == 0) return str;<br />     <br />     var itm = items[0];<br />     if( (parseInt(itm)+1) == parseInt(items[1]) ){<br />      return iter( items.slice(1), holder ? holder : itm, str);<br />     } else {<br />      return iter( items.slice(1), null, str + (holder ? holder+ '-' + itm : itm) + ', ' );<br />     }<br />    }<br />    var str = iter(nums,null,'');<br />    return str.slice(0, str.length-2) + '.';<br />   }<br />  &lt;/script&gt;<br /> &lt;/head&gt;<br /> &lt;body onload="alert(rangize(['1','2','3','5','7','8','9','10','13']))"&gt;&lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br />I think I have burned this coding puzzle to the end, so hopefully I can move on to something else... any suggestions?</body></html>
