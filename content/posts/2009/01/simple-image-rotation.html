<html>
<head>
    <title>Simple Image Rotation</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2009-01-08T18:23:00.000-06:00"/>
</head>
<body>I did a little image rotation today so I figured I'd save my prototype code for future use.<br/><a
        name='more'></a>I am using <a href="http://groovy.codehaus.org/">Groovy</a> to demo the code for this but the
Java is exactly the same, just with a little more formality. <br/><br/>
<pre class="brush:groovy">import java.awt.image.*<br/>import java.awt.geom.*<br/>import javax.imageio.*<br/><br/>def image = ImageIO.read(new File('trees.jpg'))<br/>def w = image.getWidth()<br/>def h = image.getHeight()<br/><br/>def degrees = Integer.parseInt(args[0])<br/><br/>def sin = Math.abs(Math.sin(Math.toRadians(degrees)))<br/>def cos = Math.abs(Math.cos(Math.toRadians(degrees)))<br/>def neww = (int)Math.floor(w*cos+h*sin);<br/>def newh = (int)Math.floor(h*cos+w*sin);<br/><br/>def dst = new BufferedImage(neww,newh,image.getType())<br/>def g = dst.createGraphics()<br/><br/>g.translate((neww-w)/2, (newh-h)/2);<br/>g.rotate(Math.toRadians(degrees), w/2, h/2);<br/>g.drawRenderedImage(image, null);             <br/><br/>if(ImageIO.write(dst,'jpg',new File('trees_rotated.jpg'))){<br/>    rintln "Success!"<br/>} else {<br/>    println "Oh no!"<br/>}<br/></pre>
<br/>This reads in the original image file, rotates it by the specified number of degrees and corrects the translation
and new image size so that image does not have any odd artifacts from the rotation. This should work for any positive
and negative rotation value.
</body>
</html>
