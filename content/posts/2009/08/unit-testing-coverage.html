<html>
<head>
    <title>Unit Testing: Coverage</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2009-08-10T10:54:00.000-05:00"/>
</head>
<body>I had originally intended to cover test coverage in my previous post <a
        href="http://www.coffeaelectronica.com/2009/08/unit-testing-and-you.html">Unit Testing and You</a>; however, it
seemed better to break it out into a separate post.<br/><a name='more'></a>
<table cellpadding="0" cellspacing="0" class="tr-caption-container"
       style="float: left; margin-right: 1em; text-align: left;">
    <tbody>
    <tr>
        <td style="text-align: center;"><a
                href="http://3.bp.blogspot.com/-pUIqDMFmdtc/T-8hBeOJLgI/AAAAAAAAC90/Sx70fmzZLb0/s1600/testing-coverage.png"
                imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img
                border="0" height="400"
                src="http://3.bp.blogspot.com/-pUIqDMFmdtc/T-8hBeOJLgI/AAAAAAAAC90/Sx70fmzZLb0/s400/testing-coverage.png"
                width="286"/></a></td>
    </tr>
    <tr>
        <td class="tr-caption" style="text-align: center;">Coverage view in Eclipse.</td>
    </tr>
    </tbody>
</table>
Another key, but often overlooked, part of unit testing is test coverage. Test coverage tools use byte code
instrumentation to measure how much of your code is "exercised" during your unit tests. This can make overlooked,
normally hidden, paths through your code appear obvious so that you can write tests to cover those cases as
well.<br/><br/>The image shows the <a href="http://www.eclemma.org/">EclEmma</a> plug-in coverage results view in
Eclipse. You can see that it shows how much your unit tests have "covered" each method of the class. This display is
cumulative so that if you run all of your unit tests it will show you what has not been covered by any of them. It will
also highlight the source in the editors with red, yellow or green based on the coverage.<br/><br/>If unit testing let's
you know whether or not your code works, test coverage lets you know when you are done testing. Now, coverage is not the
be-all end-all statistic of how good your unit tests are, but it is a good baseline starting point, and it is something
measurable that you can put a pin in.<br/><br/>Coverage has become a bit of a game to me, as I tend to accept anything
over 90% as being acceptable unless there is something glaringly easy and untested; however, obtaining that last 10% can
be quite an exercise. Full 100% coverage can sometimes be unobtainable due to they way certain code constructs are
measured, but like I said... 90% and above is really an obtainable goal. You can decide with your peers and coworkers
what your coverage goal should be on your project. As a rule of thumb, if you write a unit test at all you probably have
at least 75% coverage without even trying.<br/><br/>There are a handful of tools available for performing coverage
evaluation: <a href="http://www.atlassian.com/software/clover/">Clover</a>, <a
        href="http://emma.sourceforge.net/">Emma</a>, and <a href="http://cobertura.sourceforge.net/">Cobertura</a>. I
am sure there are others, that's just what came off the top of my head. <br/><br/>I recommend using the same coverage
tool for both your IDE and your build tools, though you may want to use more than one in each. Keeping a common set of
tools let's you better predict how things will work when building in one tool or the other. I tend to use Emma, because
it has a good Eclipse plug-in as well as a good maven report plug-in.
</body>
</html>
