<html>
<head>
    <title>MessageFormat Goodies</title>
    <meta name="grackle.layout" content="post"/>
    <meta name="grackle.date-published" content="2009-11-24T19:55:00.000-06:00"/>
</head>
<body>The <tt>java.text.MessageFormat</tt> class is, in my opinion, underutilized. It is what <tt>org.springframework.context.MessageSource</tt>
implementations use under the covers to provide message formatting, so they are probably used quite a bit, but do you
really let them do what they are made to do... formatting? I am guilty of it to; you convert a Date object to a
formatted string before handing it off to a MessageSource or MessageFormat instance... but no more. I wrote a quick
little format dumper to show what each type of formatting prints out:
<pre class="brush:java"><br/>Object[] params = new Object[]{ new Date() };<br/>out.println("Dates:");<br/>out.println("  default:\t" + format("{0}",                 params) );<br/>out.println("  short:\t"   + format("{0,date,short}",      params) );<br/>out.println("  medium:\t"  + format("{0,date,medium}",     params) );<br/>out.println("  long:\t\t"  + format("{0,date,long}",       params) );<br/>out.println("  custom:\t"  + format("{0,date,d MMMM yyyy}",params) );<br/><br/>out.println("\nTime:");<br/>out.println("  default:\t" + format("{0,time}",         params) );<br/>out.println("  short:\t"   + format("{0,time,short}",   params) );<br/>out.println("  medium:\t"  + format("{0,time,medium}",  params) );<br/>out.println("  long:\t\t"  + format("{0,time,long}",    params) );<br/>out.println("  full:\t\t"  + format("{0,time,full}",    params) );<br/>out.println("  custom:\t"  + format("{0,time,HH:mm:ss}",params) );<br/><br/>params = new Object[]{ new Float(31415.967F) };<br/>out.println("\nNumbers:");<br/>out.println("  default:\t"  + format("{0}",                  params) );<br/>out.println("  integer:\t"  + format("{0,number,integer}",   params) );<br/>out.println("  currency:\t" + format("{0,number,currency}",  params) );<br/>out.println("  percent:\t"  + format("{0,number,percent}",   params) );<br/>out.println("  custom:\t"   + format("{0,number,#,###.0000}",params) );<br/></pre>
Note: I used static imports for <tt>System.out</tt> and <tt>MessageFormat.format</tt> so that I could minimize the code
noise. For the same reason, I pulled the format label text outside of the formatting call; they could have easily been
done as:
<pre class="brush:java">out.println( format("  short:\t{0,time,short}",   params) );</pre>
It just seemed easier to see the formatting the other way. When I ran my format dumper I ended up with:
<pre class="brush:text"><br/>Dates:<br/>  default: 11/23/09 7:59 PM<br/>  short: 11/23/09<br/>  medium: Nov 23, 2009<br/>  long:  November 23, 2009<br/>  custom: 23 November 2009<br/><br/>Time:<br/>  default: 7:59:37 PM<br/>  short: 7:59 PM<br/>  medium: 7:59:37 PM<br/>  long:  7:59:37 PM CST<br/>  full:  7:59:37 PM CST<br/>  custom: 19:59:37<br/><br/>Numbers:<br/>  default: 31,415.967<br/>  integer: 31,416<br/>  currency: $31,415.97<br/>  percent: 3,141,597%<br/>  custom: 31,415.9668<br/></pre>
I am going to make a point to use these from now on, rather than converting manually beforehand.
</body>
</html>
