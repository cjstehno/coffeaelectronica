
<html><head>
<title>Property-backed Configuration</title>
<meta name="grackle.layout" content="post" />
<meta name="grackle.date-published" content="2009-05-23T18:22:00.000-05:00" />
</head><body>A useful trick I started doing for property-backed configuration files is to provide something a little more rich than a simple <tt>Properties</tt> object as a provider.<br /><a name='more'></a> Use a <tt>Properties</tt> instance as a delegate to pull out the properties, but provide a more useful interface for the values themselves.  Say you have a properties file such as:  <br /><br /><pre class="brush:text">path.storage = /some/path</pre><br />You could simply access these via a <tt>Properties</tt> instance, and use it directly as in:  <br /><br /><pre class="brush:java">String path = props.getProperty("path.storage");<br />File file = new File(path,"archive.zip");<br /></pre><br />but consider a potentially more useful approach  <br /><br /><pre class="brush:java">File file = config.getStorageFile("archive.zip");</pre><br />with   <br /><br /><pre class="brush:java">public File getStorageFile(String name){<br />    return new File( props.getProperty("path.storage"), name );<br />}</pre><br />You could even pull the file extension into the method if it made sense to do so... say, if all files in that path were .zip files you could then enforce more control on how it was used such as:  <br /><br /><pre class="brush:java">public File getStorageFile(String name){<br />    return new File(props.getProperty("path.storage"),name + ".zip");<br />}</pre><pre class="brush:java"><br /></pre><pre class="brush:java">File file = config.getStorageFile("archive");</pre><br />These helper methods would be part of a class called Config or something similar that delegates to an internal <tt>Properties</tt> object:  <br /><br /><pre class="brush:java">public class Config {<br />  <br />    private final Properties props;<br />  <br />    public Config(Properties p){<br />        this.props = p;<br />    }<br />  <br />    public File getStorageFile(String name){<br />        return new File(props.getProperty("path.storage"),name);<br />    }<br />}</pre><br />You could also do the loading of the properties file inside this class. Some property validation could also be helpful.  This strategy really helped to clean up a project that originally had a lot of properties that were used all over the place with very little order. Converting to this approach actually made the code more understandable and less error prone as well.</body></html>
